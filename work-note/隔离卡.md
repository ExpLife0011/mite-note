## 1.外网
---->　抓取发送到外网指定端口的数据，修改目标地址为内网地址/端口
内外网地址这时候是不通的，这个被修改过的 TCP/IP 报文不会穿过协议栈（其实上要穿过协议栈这个包就会被丢弃）
而是直接用隔离卡的 EPF 格式封装
，然后通过隔离卡通道将数据发送到内网

<----    从隔离卡获取EPF格式的报文，从中解析出TCP/IP报文，
            将这个报文发送到外网源地址

## 2.内网
---->   隔离卡获得EPF格式的报文，从中解析出TCP/IP报文，
          报文中的目标地址已经修改为内网地址
         于是可以将这个TCP/IP 报文直接发送到内网地址
<----  当内网接收到请求要发送到外网的时候  
         抓取内网报文中发到外网地址的数据(由于地址不通，这个报文会被协议栈丢掉的，怎么处理？使用回环地址？)
         将数据封装成EPF个格式,通过隔离卡发送
           

## 3.总结
隔离卡的操作相似于防火墙的端口转发，
                    防火墙的数据不用回到应用层，隔离卡的数据必须回到应用层
                    防火墙可以只是一台设备，但是隔离卡必须是两台设备
应用层的端口转发相当与一个代理，如果是TCP的话会维护连接。而隔离卡只是数据通道没法维护连接
所以可以猜测，隔离卡的数据传输，性能不如防火墙，但优于应用层的端口转发（也不一定）



## 4.隔离卡特性
        隔离卡通过内存映射mmap和DMA控制器实现将数据从用户进程拷贝到隔离卡
        隔离卡发送的内存地址范围
        start - 0x97800000
        end  - 0x9f800000
        大小为128M (0x8000000)

 